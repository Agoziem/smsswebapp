{% comment %} Annual Publish Controls Component {% endcomment %}
<div class="lg:col-span-4">
  <!-- Annual Result Configuration Form -->
  <div class="bg-base-100 rounded-xl shadow-lg p-6 mb-6">
    <h6 class="text-lg font-bold text-primary mb-4">
      <i data-lucide="settings" class="inline h-5 w-5 mr-2 text-secondary"></i>
      Annual Publishing Configuration
    </h6>

    <form action="" id="annualpublishconfigform" class="space-y-4">
      <div class="form-control">
        <label class="label">
          <span class="label-text font-medium text-primary"
            >Academic Session</span
          >
        </label>
        <select
          id="academicSessionSelect"
          name="AcademicSession"
          class="select select-bordered focus:outline-orange focus:border-orange"
          required
        >
          <!-- Dummy data for academic sessions -->
          <option value="2024/2025" selected>2024/2025</option>
          <option value="2023/2024">2023/2024</option>
          <option value="2022/2023">2022/2023</option>
          {% for Session in academic_session %}
          <option value="{{ Session.session }}">{{ Session.session }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-control">
        <label class="label">
          <span class="label-text font-medium text-primary">Class</span>
        </label>
        <select
          name="class"
          class="select select-bordered focus:outline-orange focus:border-orange"
          required
        >
          <option value="JSS 1A" selected>JSS 1A</option>
          <option value="JSS 1B">JSS 1B</option>
          <option value="JSS 2A">JSS 2A</option>
          <option value="JSS 2B">JSS 2B</option>
          <option value="JSS 3A">JSS 3A</option>
          <option value="SSS 1A">SSS 1A</option>
          <option value="SSS 2A">SSS 2A</option>
          <option value="SSS 3A">SSS 3A</option>
        </select>
      </div>
    </form>
  </div>

  <!-- Action Buttons -->
  <div class="space-y-3">
    <div class="alertcontainer2"></div>

    <button
      id="publishAnnualBtn"
      class="btn btn-primary w-full shadow-lg"
      hx-post="/api/publish-annual-results"
      hx-confirm="Are you sure you want to publish annual results? This action cannot be undone."
      hx-target="#alert-container"
    >
      <i data-lucide="calendar-check" class="h-4 w-4 mr-2"></i>
      Publish Annual Results
    </button>

    <button
      class="btn btn-success w-full shadow-lg"
      hx-get="/api/export-annual-results-excel"
      hx-trigger="click"
    >
      <i data-lucide="file-spreadsheet" class="h-4 w-4 mr-2"></i>
      Export Annual Results
    </button>

    <button class="btn btn-secondary w-full shadow-lg">
      <i data-lucide="award" class="h-4 w-4 mr-2"></i>
      Generate Transcripts
    </button>
  </div>

  <!-- Subject Visibility Controls -->
  <div class="collapse collapse-arrow bg-base-200 mt-4">
    <input type="checkbox" />
    <div class="collapse-title text-sm font-medium text-primary">
      <i data-lucide="columns" class="inline h-4 w-4 mr-2 text-secondary"></i>
      Hide/Show Subject Columns
    </div>
    <div class="collapse-content">
      <div class="space-y-2">
        <label class="cursor-pointer label justify-start gap-2">
          <input
            type="checkbox"
            class="checkbox checkbox-sm"
            id="UnhideAllSubjects"
          />
          <span class="label-text text-sm">Hide All Subjects</span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input
            type="checkbox"
            class="checkbox checkbox-sm column-checkbox"
            value="1"
            id="mathAnnualCheckbox"
          />
          <span class="label-text text-sm">Mathematics</span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input
            type="checkbox"
            class="checkbox checkbox-sm column-checkbox"
            value="2"
            id="englishAnnualCheckbox"
          />
          <span class="label-text text-sm">English Language</span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input
            type="checkbox"
            class="checkbox checkbox-sm column-checkbox"
            value="3"
            id="physicsAnnualCheckbox"
          />
          <span class="label-text text-sm">Physics</span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input
            type="checkbox"
            class="checkbox checkbox-sm column-checkbox"
            value="4"
            id="chemistryAnnualCheckbox"
          />
          <span class="label-text text-sm">Chemistry</span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input
            type="checkbox"
            class="checkbox checkbox-sm column-checkbox"
            value="5"
            id="biologyAnnualCheckbox"
          />
          <span class="label-text text-sm">Biology</span>
        </label>
      </div>
    </div>
  </div>

  <!-- Annual Statistics Card -->
  <div class="bg-base-100 rounded-xl shadow-lg p-6 mt-4">
    <h6 class="text-lg font-bold text-primary mb-4">
      <i
        data-lucide="trending-up"
        class="inline h-5 w-5 mr-2 text-secondary"
      ></i>
      Annual Statistics
    </h6>

    <div class="space-y-3 text-sm">
      <div>
        <div class="flex justify-between mb-1">
          <span>1st Term</span>
          <span>75%</span>
        </div>
        <progress
          class="progress progress-primary w-full"
          value="75"
          max="100"
        ></progress>
      </div>
      <div>
        <div class="flex justify-between mb-1">
          <span>2nd Term</span>
          <span>68%</span>
        </div>
        <progress
          class="progress progress-secondary w-full"
          value="68"
          max="100"
        ></progress>
      </div>
      <div>
        <div class="flex justify-between mb-1">
          <span>3rd Term</span>
          <span>74%</span>
        </div>
        <progress
          class="progress progress-accent w-full"
          value="74"
          max="100"
        ></progress>
      </div>
    </div>
    <div class="grid grid-cols-1 gap-3 mt-4">
      <div class="stat bg-primary/10 border border-primary/30 rounded-lg p-3">
        <div class="stat-title text-xs text-primary">Total Students</div>
        <div class="stat-value text-xl text-primary">45</div>
        <div class="stat-desc text-xs text-primary">In this class</div>
      </div>
      <div class="stat bg-primary/10 border border-primary/30 rounded-lg p-3">
        <div class="stat-title text-xs text-primary">Class Average</div>
        <div class="stat-value text-lg text-primary">78%</div>
        <div class="stat-desc text-xs text-primary">Term performance</div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="mt-4 pt-4 border-t border-base-300">
      <h6 class="text-sm font-medium text-primary mb-2">Quick Actions</h6>
      <div class="grid grid-cols-2 gap-2">
        <button class="btn btn-outline btn-xs">
          <i data-lucide="calculator" class="h-3 w-3 mr-1"></i>
          Recalculate
        </button>
        <button class="btn btn-outline btn-xs">
          <i data-lucide="refresh-cw" class="h-3 w-3 mr-1"></i>
          Refresh
        </button>
        <button class="btn btn-outline btn-xs">
          <i data-lucide="users" class="h-3 w-3 mr-1"></i>
          Class List
        </button>
        <button class="btn btn-outline btn-xs">
          <i data-lucide="settings" class="h-3 w-3 mr-1"></i>
          Settings
        </button>
      </div>
    </div>
  </div>
</div>
