{% comment %} Publish Controls Component {% endcomment %}
<div class="lg:col-span-4">
  <!-- Result Configuration Form -->
  <div class="bg-base-100 rounded-xl shadow-lg p-6 mb-6 pb-8">
    <h6 class="text-base font-bold text-primary mb-4">
      <i data-lucide="settings" class="inline h-5 w-5 mr-2 text-secondary"></i>
      Term Publishing Configuration
    </h6>
    
    <form action="" id="publishconfigform" class="space-y-4">
      <div class="form-control">
        <label class="label">
          <span class="label-text font-medium text-primary">Academic Session</span>
        </label>
        <select id="academicSessionSelect" name="AcademicSession" 
                class="select select-bordered focus:outline-orange focus:border-orange h-[35px] rounded-md" required>
          <!-- Dummy data for academic sessions -->
          <option value="2024/2025" selected>2024/2025</option>
          <option value="2023/2024">2023/2024</option>
          <option value="2022/2023">2022/2023</option>
          {% for Session in academic_session %}
          <option value="{{ Session.session }}">{{ Session.session }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-control">
        <label class="label">
          <span class="label-text font-medium text-primary">Term</span>
        </label>
        <select id="termSelect" name="Term" 
                class="select select-bordered focus:outline-orange focus:border-orange h-[35px] rounded-md" required>
          <!-- Dummy data for terms -->
          <option value="First Term" selected>First Term</option>
          <option value="Second Term">Second Term</option>
          <option value="Third Term">Third Term</option>
          {% for Term in Terms %}
          <option value="{{ Term.term }}">{{ Term.term }}</option>
          {% endfor %}
        </select>
      </div>
    </form>
  </div>

  <!-- Action Buttons -->
  <div class="space-y-3">
    <div class="alertcontainer2"></div>
    
    <button id="publishbtn" class="btn btn-primary w-full shadow-lg h-[35px] rounded-md"
            hx-post="/api/publish-results" 
            hx-confirm="Are you sure you want to publish these term results?"
            hx-target="#alert-container">
      <i data-lucide="upload" class="h-4 w-4 mr-2"></i>
      Publish Term Results
    </button>

    <button class="btn btn-success w-full shadow-lg h-[35px] rounded-md"
            hx-get="/api/export-results-excel"
            hx-trigger="click">
      <i data-lucide="file-spreadsheet" class="h-4 w-4 mr-2"></i>
      Export to Excel
    </button>

  </div>

  <!-- Subject Visibility Controls -->
  <div class="collapse collapse-arrow bg-base-200 mt-4">
    <input type="checkbox" />
    <div class="collapse-title text-sm font-medium text-primary">
      <i data-lucide="columns" class="inline h-4 w-4 mr-2 text-secondary"></i>
      Hide/Show Subject Columns
    </div>
    <div class="collapse-content">
      <div class="space-y-2">
        <label class="cursor-pointer label justify-start gap-2">
          <input type="checkbox" class="checkbox checkbox-sm" id="UnhideAllCheckbox" />
          <span class="label-text text-sm">Hide All Subjects</span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input type="checkbox" class="checkbox checkbox-sm column-checkbox" value="1" id="mathCheckbox" />
          <span class="label-text text-sm">
            <span class="text-primary font-medium">MATH:</span> Mathematics
          </span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input type="checkbox" class="checkbox checkbox-sm column-checkbox" value="2" id="englishCheckbox" />
          <span class="label-text text-sm">
            <span class="text-primary font-medium">ENG:</span> English Language
          </span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input type="checkbox" class="checkbox checkbox-sm column-checkbox" value="3" id="physicsCheckbox" />
          <span class="label-text text-sm">
            <span class="text-primary font-medium">PHY:</span> Physics
          </span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input type="checkbox" class="checkbox checkbox-sm column-checkbox" value="4" id="chemistryCheckbox" />
          <span class="label-text text-sm">
            <span class="text-primary font-medium">CHE:</span> Chemistry
          </span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input type="checkbox" class="checkbox checkbox-sm column-checkbox" value="5" id="biologyCheckbox" />
          <span class="label-text text-sm">
            <span class="text-primary font-medium">BIO:</span> Biology
          </span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input type="checkbox" class="checkbox checkbox-sm column-checkbox" value="6" id="geographyCheckbox" />
          <span class="label-text text-sm">
            <span class="text-primary font-medium">GEO:</span> Geography
          </span>
        </label>
        <label class="cursor-pointer label justify-start gap-2">
          <input type="checkbox" class="checkbox checkbox-sm column-checkbox" value="7" id="economicsCheckbox" />
          <span class="label-text text-sm">
            <span class="text-primary font-medium">ECO:</span> Economics
          </span>
        </label>
        {% for sub in subjects_allocation.subjects.all %}
        <label class="cursor-pointer label justify-start gap-2">
          <input type="checkbox" class="checkbox checkbox-sm column-checkbox" 
                 value="{{ forloop.counter }}" id="{{ forloop.counter }}Checkbox" />
          <span class="label-text text-sm">
            <span class="text-primary font-medium">{{ sub.subject_code }}:</span>
            {{ sub.subject_name }}
          </span>
        </label>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Term Statistics Card -->
  <div class="bg-base-100 rounded-xl shadow-lg p-6 mt-4">
    <h6 class="text-lg font-bold text-primary mb-4">
      <i data-lucide="bar-chart-3" class="inline h-5 w-5 mr-2 text-secondary"></i>
      Term Statistics
    </h6>
    <div class="grid grid-cols-1 gap-3">
      <div class="stat bg-primary/10 border border-primary/30 rounded-lg p-3">
        <div class="stat-title text-xs text-primary">Total Students</div>
        <div class="stat-value text-xl text-primary">45</div>
        <div class="stat-desc text-xs text-primary">In this class</div>
      </div>
      <div class="stat bg-primary/10 border border-primary/30 rounded-lg p-3">
        <div class="stat-title text-xs text-primary">Completed</div>
        <div class="stat-value text-xl text-primary">42</div>
        <div class="stat-desc text-xs text-primary">93.3% completion rate</div>
      </div>
      <div class="stat bg-primary/10 border border-primary/30 rounded-lg p-3">
        <div class="stat-title text-xs text-primary">Pending</div>
        <div class="stat-value text-lg text-primary">3</div>
        <div class="stat-desc text-xs text-primary">6.7% incomplete</div>
      </div>
      <div class="stat bg-primary/10 border border-primary/30 rounded-lg p-3">
        <div class="stat-title text-xs text-primary">Class Average</div>
        <div class="stat-value text-lg text-primary">78%</div>
        <div class="stat-desc text-xs text-primary">Term performance</div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="mt-4 pt-4 border-t border-base-300">
      <h6 class="text-sm font-medium text-primary mb-2">Quick Actions</h6>
      <div class="grid grid-cols-2 gap-2">
        <button class="btn btn-outline btn-xs">
          <i data-lucide="calculator" class="h-3 w-3 mr-1"></i>
          Recalculate
        </button>
        <button class="btn btn-outline btn-xs">
          <i data-lucide="refresh-cw" class="h-3 w-3 mr-1"></i>
          Refresh
        </button>
        <button class="btn btn-outline btn-xs">
          <i data-lucide="users" class="h-3 w-3 mr-1"></i>
          Class List
        </button>
        <button class="btn btn-outline btn-xs">
          <i data-lucide="settings" class="h-3 w-3 mr-1"></i>
          Settings
        </button>
      </div>
    </div>
  </div>
</div>
